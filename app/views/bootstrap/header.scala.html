@*
The main header displayed on each layout.
*@
@import controllers.project.{routes => projectRoutes}
@import controllers.sugar.Requests.OreRequest
@import ore.OreConfig
@import ore.permission._

@(user: Boolean = true)(implicit messages: Messages, request: OreRequest[_], config: OreConfig)

<nav class="navbar fixed-top navbar-expand-md">
    <div class="container">
        <div class="navbar-toggler sponge-menu">
            <div tabindex="1" class="navbar-brand">
                <div class="logo"></div>
                <span class="sponge-headline">Sponge</span>
                <i class="fas fa-chevron-down fa-fw"></i>
            </div>
        </div>
        <div class="collapse navbar-collapse show" id="sponge-menu">
            <div class="navbar-nav sponge-dark">
                <div class="nav-item">
                    <a class="nav-link" href="https://www.spongepowered.org">
                        <i class="fas fa-home fa-fw"></i>
                        <span>Homepage</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a class="nav-link" href="https://forums.spongepowered.org">
                        <i class="fab fa-discourse fa-fw"></i>
                        <span>Forums</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a class="nav-link" href="https://github.com/SpongePowered">
                        <i class="fas fa-code fa-fw"></i>
                        <span>Code</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a class="nav-link" href="https://docs.spongepowered.org">
                        <i class="fas fa-book fa-fw"></i>
                        <span>Docs</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a class="nav-link" href="https://jd.spongepowered.org">
                        <i class="fas fa-graduation-cap fa-fw"></i>
                        <span>Javadocs</span>
                    </a>
                </div>
                <div class="nav-item active">
                    <a class="nav-link active" href="https://ore.spongepowered.org">
                        <i class="fas fa-plug fa-fw"></i>
                        <span>Plugins</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a class="nav-link" href="https://www.spongepowered.org/downloads">
                        <i class="fas fa-download fa-fw"></i>
                        <span>Downloads</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a class="nav-link" href="https://www.spongepowered.org/chat">
                        <i class="fas fa-comments fa-fw"></i>
                        <span>Chat</span>
                    </a>
                </div>
            </div>
        </div>

        <div class="navbar-toggler sub-menu">
            <i class="fas fa-bars fa-fw toggler-icon-size"></i>
        </div>
        <div class="collapse navbar-collapse show" id="sub-menu">
            <div class="navbar-nav ml-auto sponge-dark">
                @if(user) {
                    @request.data.currentUser.map { user =>
                        <div class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="newDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-plus fa-2x"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="newDropdown">
                                <a class="dropdown-item" href="@projectRoutes.Projects.showCreator()">
                                    <i class="fas fa-book fa-fw"></i>
                                    @messages("project.create")
                                </a>
                                <a class="dropdown-item" href="@routes.Organizations.showCreator()">
                                    <i class="fas fa-users fa-fw"></i>
                                    @messages("org.create")
                                </a>
                            </div>
                        </div>
                        <div class="nav-item">
                            <a class="nav-link" href="@routes.Users.showAuthors(None, None)">
                                <i class="fas fa-users fa-2x"></i>
                            </a>
                        </div>
                        @if(request.data.globalPerm(ReviewVisibility) || request.data.globalPerm(ReviewProjects) || request.data.globalPerm(ViewStats) || request.data.globalPerm(ViewHealth)) {
                            <div class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="adminDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-chess-rook fa-2x fa-fw"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="adminDropdown">
                                    @if(request.data.globalPerm(ReviewFlags)) {
                                        <a class="dropdown-item" href="@routes.Application.showFlags()">
                                            <i class="fas fa-flag fa-fw"></i>
                                            @messages("project.flag.plural")
                                        </a>
                                    }
                                    @if(request.data.globalPerm(ReviewVisibility)) {
                                        <a class="dropdown-item" href="@routes.Application.showProjectVisibility()">
                                            <i class="fas fa-check-square fa-fw"></i>
                                            Project Approvals
                                        </a>
                                    }
                                    @if(request.data.globalPerm(ReviewProjects)) {
                                        <a class="dropdown-item" href="@routes.Application.showQueue()">
                                            <i class="fas fa-check-circle fa-fw"></i>
                                            @messages("user.queue")
                                        </a>
                                    }
                                    @if(request.data.globalPerm(ViewStats)) {
                                        <a class="dropdown-item" href="@routes.Application.showStats()">
                                            <i class="fas fa-chart-line fa-fw"></i>
                                            @messages("user.stats")
                                        </a>
                                    }
                                    @if(request.data.globalPerm(ViewHealth)) {
                                        <a class="dropdown-item" href="@routes.Application.showHealth()">
                                            <i class="fas fa-heartbeat fa-fw"></i>
                                            @messages("admin.health.title")
                                        </a>
                                    }
                                </div>
                            </div>
                        }

                        <div class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <img height="32" width="32" class="user-avatar" src="@user.avatarUrl.getOrElse(routes.Assets.at("images/spongie-mark.svg"))" />
                            </a>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                                <a class="dropdown-item" href="@routes.Users.showProjects(user.username, None)">
                                    <i class="fa fa-user-circle fa-fw"></i>
                                    @messages("user.profile")
                                </a>
                                <a class="dropdown-item" href="@routes.Users.showNotifications(None, None)">
                                    <i class="fas fa-bell fa-fw"></i>
                                    @messages("notification.plural")
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="@routes.Users.logOut(Some(request.path))">
                                    <i class="fa fa-sign-out-alt fa-fw"></i>
                                    @messages("general.signout")
                                </a>
                            </div>
                        </div>
                    }.getOrElse {
                        <div class="nav-item">
                            <a class="nav-link" href="@routes.Users.logIn(None, None, Some(request.path))">
                                <div class="btn sponge-yellow">@messages("general.login")</div>
                            </a>
                        </div>
                        <div class="nav-item">
                            <a class="nav-link" href="@routes.Users.signUp()">
                                <div class="btn sponge-yellow">@messages("general.signup")</div>
                            </a>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
</nav>
